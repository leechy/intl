var __awaiter=this&&this.__awaiter||function(e,t,r,n){function i(e){return e instanceof r?e:new r((function(t){t(e)}))}return new(r||(r=Promise))((function(r,o){function a(e){try{u(n.next(e))}catch(t){o(t)}}function s(e){try{u(n["throw"](e))}catch(t){o(t)}}function u(e){e.done?r(e.value):i(e.value).then(a,s)}u((n=n.apply(e,t||[])).next())}))};var __generator=this&&this.__generator||function(e,t){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},n,i,o,a;return a={next:s(0),throw:s(1),return:s(2)},typeof Symbol==="function"&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return u([e,t])}}function u(a){if(n)throw new TypeError("Generator is already executing.");while(r)try{if(n=1,i&&(o=a[0]&2?i["return"]:a[0]?i["throw"]||((o=i["return"])&&o.call(i),0):i.next)&&!(o=o.call(i,a[1])).done)return o;if(i=0,o)a=[a[0]&2,o.value];switch(a[0]){case 0:case 1:o=a;break;case 4:r.label++;return{value:a[1],done:false};case 5:r.label++;i=a[1];a=[0];continue;case 7:a=r.ops.pop();r.trys.pop();continue;default:if(!(o=r.trys,o=o.length>0&&o[o.length-1])&&(a[0]===6||a[0]===2)){r=0;continue}if(a[0]===3&&(!o||a[1]>o[0]&&a[1]<o[3])){r.label=a[1];break}if(a[0]===6&&r.label<o[1]){r.label=o[1];o=a;break}if(o&&r.label<o[2]){r.label=o[2];r.ops.push(a);break}if(o[2])r.ops.pop();r.trys.pop();continue}a=t.call(e,r)}catch(s){a=[6,s];i=0}finally{n=o=0}if(a[0]&5)throw a[1];return{value:a[0]?a[1]:void 0,done:true}}};System.register(["./p-1b1995da.system.js"],(function(e){"use strict";var t,r,n,i,o;return{setters:[function(e){t=e.r;r=e.g;n=e.h;i=e.c;o=e.H}],execute:function(){var a=e("intl_phrase",function(){function e(e){t(this,e);this.inGroup=false;this.value="";this.error="";this.resolvedName="";this.lazy=true;this.dict=r(this,"intl-dictionary")}e.prototype.nameChanged=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:return[4,this.resolveName()];case 1:e.sent();this.addIO();return[2]}}))}))};e.prototype.replaceChanged=function(){switch(typeof this.replace){case"string":try{var e=JSON.parse(this.replace);this.replacements=new Map(Object.entries(e))}catch(t){throw new Error('Invalid value for "replace" in <intl-phrase>. "replace" must either be an object or a valid JSON string.')}break;case"object":this.replacements=new Map(Object.entries(this.replace));break;default:throw new Error('Invalid value for "replace" in <intl-phrase>. "replace" must either be an object or a valid JSON string.')}};e.prototype.langChangeHandler=function(){this.addIO()};e.prototype.componentWillLoad=function(){return __awaiter(this,void 0,void 0,(function(){return __generator(this,(function(e){switch(e.label){case 0:this.addIO();if(this.replace)this.replaceChanged();return[4,this.resolveName()];case 1:e.sent();return[2]}}))}))};e.prototype.componentWillUnload=function(){this.removeIO()};e.prototype.resolveName=function(){return __awaiter(this,void 0,void 0,(function(){var e=this;return __generator(this,(function(t){return[2,new Promise((function(t){var r=e.element.parentElement.closest("intl-phrase-group");if(r){e.inGroup=true;e.resolvedName=r.name+"."+e.name;t()}else{e.resolvedName=e.name;t()}}))]}))}))};e.prototype.resolveValue=function(){return __awaiter(this,void 0,void 0,(function(){var e,t,r,n,i,o;return __generator(this,(function(a){switch(a.label){case 0:e=this,t=e.resolvedName,r=e.locale;return[4,this.dict.componentOnReady()];case 1:n=a.sent();o=this.replaceValue;return[4,n.resolvePhrase(t,r)];case 2:i=o.apply(this,[a.sent()]);if(i!==false&&i!==undefined){this.value=i}else{this.error=this.name}return[2]}}))}))};e.prototype.replaceValue=function(e){var t=this;if(e===false)return e;var r=/{{\s*([^}}\s]*)\s*}}/g;return e.replace(r,(function(e,r){return t.replacements.has(r)?t.replacements.get(r).toString():e}))};e.prototype.addIO=function(){var e=this;if(this.name===undefined)return;if("IntersectionObserver"in window){this.io=new IntersectionObserver((function(t){if(t[0].isIntersecting){e.resolveValue().then((function(){e.removeIO()}))}}));this.io.observe(this.element)}else{setTimeout((function(){return e.resolveValue()}),200)}};e.prototype.removeIO=function(){if(this.io){this.io.disconnect();this.io=undefined}};e.prototype.hostData=function(){return{style:{color:this.error!==""?"red":null}}};e.prototype.__stencil_render=function(){return this.value?n("ins",{style:{textDecoration:"inherit"},innerHTML:this.value}):this.error};Object.defineProperty(e.prototype,"element",{get:function(){return i(this)},enumerable:true,configurable:true});Object.defineProperty(e,"watchers",{get:function(){return{name:["nameChanged"],replace:["replaceChanged"]}},enumerable:true,configurable:true});e.prototype.render=function(){return n(o,this.hostData(),this.__stencil_render())};return e}())}}}));